[toc]
***

### 大模型

gemini 3.0 pro

### 问题

根据以下日报信息，生成 11.24 - 11.27 这周的周报：

1. 
智能移动机器人小组（聂金词）11月24日工作汇报如下：
研发类型：软件开发

完成任务1：AGV故障填报和分析系统开发
    - 把程序做成docker镜像部署到内网服务器

完成任务2：2d3dslam统一改动联调。
    - 测试双臂机器人使用的wifi ap 的传输速度：
        - 不启用3d slam时，传输速度 < 2MBytes
        - 启用3d slam时, 传输速度 400 - 900 KBytes
        一个点云帧有7-8百 KBytes，因此传输一个点云帧大约耗时1秒，上位机点云的更新速度慢

明天计划：

任务1：agv小车开发和维护
    - 2d3dslam统一改动联调。
    - 测试2d slam 时，测试双臂机器人使用的wifi ap 的传输速度，上位机点云的更新效果
    - 找一个带宽更大的wifi来测试3d slam 时上位机点云的更新效果

任务2：上位机后端服务器适配开发，以支持web和小屏需求

2. 
智能移动机器人小组（聂金词）11月25日工作汇报如下：
研发类型：软件开发

完成任务1：agv小车开发和维护
    - 上位机服务端优化：根据 Topic 的数据特性（频率、数据量、重要性），调整的队列深度。
    - 清除错误信息处理程序去掉模式限制。(奉工要求)
    - 同步3dslam联调的改动：优化线程模型：将耗时长的I/O操作或业务逻辑与网络I/O线程分离，对线程池进行改造，区分出：I/O任务和业务逻辑任务。

完成任务2：需求沟通，会议
    - 跟郑工沟通飞书文档计划和内容
    - 参加文轩组织的会议，讨论app需求和方案

明天计划：

任务1：agv小车开发和维护
    - 2d3dslam统一改动联调。
    - 测试2d slam 时，测试双臂机器人使用的wifi ap 的传输速度，上位机点云的更新效果
    - 找一个带宽更大的wifi来测试3d slam 时上位机点云的更新效果

任务2：上位机服务器改用日志公共类 LogManager.hpp


3. 
智能移动机器人小组（聂金词）11月26日工作汇报如下：
研发类型：软件开发

完成任务1：设备标准化操作与维护知识库维护
    - 和郑工拍摄今天计划的内容

完成任务2：上位机服务器改用日志公共类 LogManager.hpp
    - 已完成，公共日志类默认会输出到终端，反馈给肖工

完成任务3：2d3dslam统一改动联调。
    - 合入 2d3d_unify 分支的改动，包括：
    - 2d3dslam合一的改动
    - 代码优化：更新连接空闲时间时无需加锁
    - 优化点云获取，问题：获取点云处理程序整个的耗时 2500ms左右，但是实际的逻辑处理耗时只有 100 多ms, 大部分的时间花费在获取锁上(lock(mutex_);)
        原因：消费者（Handle）持有锁的时间（~150ms）大于 生产者（Update）产生数据的间隔（100ms），当一个请求正在处理时，新的点云数据来了，生产者被阻塞；或者新的请求来了，也被阻塞。锁的排队时间会越来越长，导致 total cost 高达 2500ms。
        解决：缩小临界区，互斥锁只应该保护共享数据的读写，而不应该包含耗时的业务逻辑处理（JSON 序列化）。
        - 在 handle 中，加锁仅为了拷贝数据到本地变量。解锁后，再利用本地变量进行耗时的 JSON 转换。

明天计划：

任务1：agv小车开发和维护
    - 实现席工反馈的通过上扫码相机识别货架需求

任务2：设备标准化操作与维护知识库维护
    - 继续拍摄

4. 

智能移动机器人小组（聂金词）11月27日工作汇报如下：
研发类型：软件开发

完成任务1：设备标准化操作与维护知识库维护
    - 和郑工拍摄今天计划的内容

完成任务2：agv小车开发和维护
    - 实现席工反馈的通过上扫码相机识别货架需求：新增获取货架编号api-get_rack_number

完成任务3：异步通信库优化
    - 为了方便客户代码指定请求名称命令字段文件路径，给Client构造函数及其工厂函数新增一个可选的参数: /*requestname2cmd_file=""*/，如果不指定该参数，用的是头文件名称空间中的常量requestname2cmd_file指定的文件

明天计划：

任务1：设备标准化操作与维护知识库维护
    - 继续拍摄


---

以下是基于您提供的日报生成的周报（11.24 - 11.27）：

***

**智能移动机器人小组周报**
**日期：** 2025.11.24 - 2025.11.27
**汇报人：** 聂金词
**岗位：** 软件开发

### 一、 本周重点工作总结

本周主要围绕 AGV 上位机系统的性能优化、2D/3D SLAM 统一联调以及新需求功能的开发进行。重点解决了点云数据处理的高耗时瓶颈，并推进了设备维护知识库的建设。

**1. 系统开发与功能实现**
*   **AGV 故障填报系统：** 完成系统容器化，制作 Docker 镜像并成功部署至内网服务器。
*   **上位机新功能：** 响应业务需求（席工），新增 `get_rack_number` API，支持通过上扫码相机识别货架编号。
*   **底层库优化：** 优化异步通信库，为 Client 构造函数及工厂函数增加可选参数，支持灵活指定命令字段文件路径。
*   **日志系统升级：** 完成上位机服务器代码重构，统一接入公共日志类 `LogManager.hpp`。
*   **逻辑调整：** 按需求（奉工）去除了清除错误信息处理程序的模式限制；根据 Topic 特性（频率、数据量）调整了消息队列深度。

**2. 2D/3D SLAM 联调与性能优化**
*   **代码合入：** 完成 `2d3d_unify` 分支的改动合入，统一了 2D/3D SLAM 的代码架构。
*   **网络性能测试：** 测试了双臂机器人在启用 3D SLAM 时的 Wi-Fi 传输性能。数据表明启用后传输速度降至 400-900 KB/s，单帧点云传输耗时约 1 秒，确认为上位机点云更新卡顿的网络层原因。
*   **线程模型重构：** 优化服务端线程模型，将耗时长的 I/O 操作/业务逻辑与网络 I/O 线程分离，改造线程池以区分 I/O 任务和业务计算任务。

**3. 知识库与协作**
*   **标准化建设：** 配合郑工进行“设备标准化操作与维护知识库”的视频拍摄工作。
*   **需求沟通：** 参与 App 需求方案讨论会；沟通飞书文档建设规划。

### 二、 技术难点攻克（亮点）

**上位机点云处理性能瓶颈突破**
*   **问题现象：** 获取点云处理程序的总耗时高达 2500ms 左右，导致上位机显示严重滞后。
*   **原因分析：** 经排查，虽然实际逻辑处理仅需 100多毫秒，但由于消费者持有锁的时间（含 JSON 序列化约 150ms）大于生产者产生数据的间隔（100ms），导致严重的锁竞争和排队等待。
*   **解决方案：** 优化临界区范围。在加锁期间仅进行必要的数据拷贝，将耗时的 JSON 序列化操作移至解锁后处理。
*   **优化结果：** 解决了长时间阻塞问题，显著提升了点云数据的处理效率。

### 三、 后续工作计划

1.  **知识库建设：** 继续配合进行设备标准化操作与维护的视频拍摄。
2.  **AGV 开发与维护：** 持续响应业务端的开发需求及日常维护。
3.  **性能测试：** 继续寻找更大带宽的 Wi-Fi 环境，测试 3D SLAM 状态下上位机点云的更新效果，以验证最佳网络配置。

### 周报填写

1. 系统开发与功能实现
    - AGV 故障填报系统： 完成系统容器化，制作 Docker 镜像并成功部署至内网服务器。
    - 上位机新功能： 响应业务需求（席工），新增 `get_rack_number` API，支持通过上扫码相机识别货架编号。
    - 底层库优化： 优化异步通信库，为 Client 构造函数及工厂函数增加可选参数，支持灵活指定命令字段文件路径。
    - 日志系统升级： 完成上位机服务器代码重构，统一接入公共日志类 `LogManager.hpp`。
    - 逻辑调整： 按需求（奉工）去除了清除错误信息处理程序的模式限制；根据 Topic 特性（频率、数据量）调整了消息队列深度。

2. 2D/3D SLAM 联调与性能优化
    - 代码合入： 完成 `2d3d_unify` 分支的改动合入，统一了 2D/3D SLAM 的代码架构。
    - 网络性能测试： 测试了双臂机器人在启用 3D SLAM 时的 Wi-Fi 传输性能。数据表明启用后传输速度降至 400-900 KB/s，单帧点云传输耗时约 1 秒。
    - 线程模型重构： 优化服务端线程模型，将耗时长的 I/O 操作/业务逻辑与网络 I/O 线程分离，改造线程池以区分 I/O 任务和业务计算任务。
    - 上位机点云处理性能瓶颈优化：缩小临界区范围。在加锁期间仅进行必要的数据拷贝，将耗时的 JSON 序列化操作移至解锁后处理。解决了长时间阻塞问题，显著提升了点云数据的处理效率。

3. 知识库与协作
    - 标准化建设： 配合郑工进行“设备标准化操作与维护知识库”的视频拍摄工作。
    - 需求沟通： 参与 App 需求方案讨论会；沟通飞书文档建设规划。